<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NHAFLOWER - Chi tiết sản phẩm</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
      crossorigin="anonymous"
    />
    <!-- Fallback to local Bootstrap CSS if CDN fails -->
    <link
      href="../assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
      onerror="console.warn('Local Bootstrap CSS not available, using CDN')"
    />

    <!-- Font Awesome -->
    <link
      href="../assets/vendor/fontawesome-free/css/all.min.css"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/user/detail_product.css" />
    <link rel="stylesheet" href="../assets/css/user/common.css" />
  </head>
  <body>
    <!-- THANH NAVIGATION - Menu điều hướng chính -->
    <nav class="navbar navbar-expand-lg navbar-custom fixed-top">
      <div class="container">
        <!-- Menu bên trái -->
        <div class="navbar-nav mr-auto">
          <a class="nav-link-custom" href="home.html">Home</a>
          <a
            class="nav-link-custom"
            href="list_product.html"
            onclick="showCategories()"
            >Danh sách</a
          >
        </div>

        <!-- Logo NHAFLOWER ở giữa -->
        <div class="navbar-brand-logo">
          <img
            src="../assets/img/user/logo_NHAFLOWER.png"
            alt="NHAFLOWER"
            class="brand-circle-logo"
          />
        </div>

        <!-- navbar-toggler: Nút menu responsive cho mobile -->
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Menu bên phải -->
        <div class="navbar-nav ml-auto">
          <!-- Search icon -->
          <div class="nav-icon-wrapper">
            <i
              class="fas fa-search nav-icon"
              title="Tìm kiếm"
              onclick="showSearchModal()"
            ></i>
          </div>

          <!-- User avatar -->
          <div class="nav-icon-wrapper">
            <div
              class="user-avatar"
              title="Trang cá nhân"
              onclick="window.location.href='profile/personal-info.html'"
            >
              <i class="fas fa-user"></i>
            </div>
          </div>

          <!-- Shopping cart -->
          <div class="nav-icon-wrapper">
            <i
              class="fas fa-shopping-bag nav-icon"
              title="Giỏ hàng"
              onclick="window.location.href='shopping_cart.html'"
            ></i>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content product-detail-container">
      <!-- Product Detail Section -->
      <div class="row product-detail-row">
        <!-- Product Images - Full Width Row -->
        <div class="col-12">
          <div class="product-images-section">
            <!-- Main Image Only -->
            <div class="main-image-wrapper">
              <img
                id="mainProductImage"
                src="../assets/img/products/default-flower.svg"
                alt="Sản phẩm"
                class="main-product-image"
              />
              <button
                class="image-zoom-btn"
                onclick="openImageModal(document.getElementById('mainProductImage').src)"
              >
                <i class="fas fa-search-plus"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Product Info Section - Separate Row -->
      <div class="row product-info-row">
        <!-- Product Info -->
        <div class="col-12">
          <div class="product-info-section">
            <!-- Product Title -->

            <h1 class="product-title" id="productName"></h1>
            <div class="product-rating-section">
              <div class="rating-stars" id="productRating"></div>
            </div>
            <div class="stock-quantity mb-2" id="stockQuantityInfo"></div>

            <!-- Product Price -->
            <div class="price-section">
              <span class="current-price" id="productPrice"></span>
              <span class="discount-badge" id="discountBadge"></span>
            </div>

            <!-- Product Description -->
            <div class="description-section">
              <h3>Mô tả sản phẩm</h3>
              <p id="productDescription"></p>
            </div>

            <!-- Product Options -->
            <div class="product-options">
              <!-- Quantity Selector -->
              <div
                class="quantity-section d-flex align-items-center justify-content-center"
              >
                <label>Số lượng:</label>
                <div class="quantity-controls">
                  <button class="qty-btn qty-minus" type="button">-</button>
                  <input
                    type="number"
                    id="quantity"
                    value="1"
                    min="1"
                    max="99"
                    class="form-control text-center"
                    style="width: 60px"
                  />
                  <button class="qty-btn qty-plus" type="button">+</button>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button
                id="addToCart"
                class="btn btn-primary add-to-cart add-to-cart-btn"
              >
                <i class="fas fa-shopping-cart"></i>
                Thêm vào giỏ hàng
              </button>
              <button class="btn btn-success buy-now-btn" onclick="buyNow()">
                <i class="fas fa-bolt"></i>
                Mua ngay
              </button>
              <button
                class="btn btn-outline-secondary favorite-btn"
                onclick="toggleFavorite()"
              >
                <i class="far fa-heart"></i>
              </button>
            </div>

            <!-- Product Features -->
            <div class="product-features">
              <div class="feature-item">
                <i class="fas fa-truck"></i>
                <span>Giao hàng miễn phí trong nội thành</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-undo"></i>
                <span>Đổi trả trong 7 ngày</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-shield-alt"></i>
                <span>Cam kết chất lượng</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Product Comments -->
      <div class="product-comments-section mt-5">
        <h3>Bình luận & Đánh giá</h3>
        <div id="productComments"></div>
        <div class="comment-form mt-4 p-3 border rounded bg-light">
          <h5>Gửi bình luận của bạn</h5>
          <form id="addCommentForm" onsubmit="return false;">
            <div class="form-group">
              <label for="commentContent">Nội dung</label>
              <textarea
                id="commentContent"
                class="form-control"
                rows="3"
                required
              ></textarea>
            </div>
            <div class="form-group">
              <label for="commentRating">Số sao</label>
              <select id="commentRating" class="form-control" required>
                <option value="">Chọn số sao</option>
                <option value="5">5 - Tuyệt vời</option>
                <option value="4">4 - Tốt</option>
                <option value="3">3 - Bình thường</option>
                <option value="2">2 - Tạm được</option>
                <option value="1">1 - Không hài lòng</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary">Gửi bình luận</button>
            <div id="commentMsg" class="mt-2"></div>
          </form>
        </div>
      </div>

      <!-- Related Products -->
      <div class="related-products-section">
        <h3>Sản phẩm liên quan</h3>
        <div class="row" id="relatedProducts"></div>
      </div>
    </div>

    <!-- Image Modal -->
    <div class="modal fade" id="imageModal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              <span>&times;</span>
            </button>
          </div>
          <div class="modal-body text-center">
            <img id="modalImage" src="" alt="Sản phẩm" class="img-fluid" />
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="../assets/vendor/jquery/jquery.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script src="../assets/js/user/detail_product.js"></script>
  </body>
</html>
